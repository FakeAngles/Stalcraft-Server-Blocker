# Stalcraft Server Blocker

## Описание
Stalcraft Server Blocker — это приложение на Python, предназначенное для блокировки определённых игровых серверов *Stalcraft* путём перехвата сетевых пакетов. Пользователи могут выбирать серверы из списка, проверять их пинг и блокировать подключение к выбранным серверам, чтобы игра не могла к ним подключиться.

## Возможности
- **Выбор серверов**: Выбор серверов для блокировки из JSON-файла (`Servers.json`).
- **Проверка пинга**: Тестирование пинга выбранных серверов с отображением среднего, минимального, максимального пинга и процента потерь пакетов.
- **Блокировка пакетов**: Блокировка TCP/UDP-трафика на портах 29450–29460 для выбранных серверов с помощью `pydivert`.

## Требования
- **Python**: Версия 3.8 или выше.
- **Зависимости**: Указаны в файле `requirements.txt`:
  - `PyQt6` — для графического интерфейса.
  - `pydivert` — для перехвата и управления сетевыми пакетами.
  - `ping3` — для проверки пинга.
- **Права администратора**: Необходимы для работы с `pydivert`.
- **Драйвер WinDivert**: Требуется для `pydivert` (устанавливается автоматически при установке библиотеки).
- **Файл Servers.json**: Файл с данными о серверах уже включён в репозиторий и должен находиться в той же директории, что и скрипт или исполняемый файл.

## Установка
1. **Скачайте репозиторий**:
   Перейдите на страницу репозитория на GitHub, нажмите кнопку `Code` и выберите `Download ZIP`. Распакуйте архив в любую папку.

2. **Установите зависимости**:
   Убедитесь, что Python 3.8+ установлен, затем откройте терминал в папке с распакованным архивом и выполните:
   ```bash
   pip install -r requirements.txt
   ```

3. **Проверьте наличие файла Servers.json**:
   Файл `Servers.json` уже включён в репозиторий и содержит данные о серверах в следующем формате:
   ```json
   {
     "pools": [
       {
         "name": "Название пула",
         "tunnels": [
           {
             "name": "Название сервера",
             "address": "IP:Порт"
           }
         ]
       }
     ]
   }
   ```
   Убедитесь, что он находится в той же директории, что и скрипт или исполняемый файл.

4. **Запустите приложение**:
   - Запустите скрипт напрямую:
     ```bash
     python server_blocker.py
     ```
   - Или, если используете скомпилированный исполняемый файл (например, через PyInstaller), убедитесь, что `Servers.json` находится в той же директории, и запустите файл с правами администратора.

## Использование
1. **Запустите приложение**:
   Запустите приложение с правами администратора. В Windows щелкните правой кнопкой мыши на скрипте или исполняемом файле и выберите «Запуск от имени администратора».

2. **Выберите серверы**:
   - В левой части интерфейса отображается древовидный список пулов серверов и серверов.
   - Отметьте галочками серверы, которые хотите заблокировать. Выбор пула автоматически включает или отключает все серверы в нём.

3. **Проверьте пинг**:
   - Нажмите кнопку «Проверить пинг» для тестирования пинга выбранных серверов.
   - Результаты (средний, минимальный, максимальный пинг и процент потерь) отобразятся в текстовом поле в правой нижней части интерфейса.

4. **Заблокируйте серверы**:
   - Нажмите кнопку «▶ Заблокировать», чтобы начать блокировку выбранных серверов.
   - Приложение будет перехватывать TCP/UDP-пакеты на портах 29450–29460 для IP-адресов выбранных серверов.
   - Метка статуса обновится до «Блокировка активна».

5. **Разблокируйте серверы**:
   - Нажмите кнопку «■ Разблокировать», чтобы остановить блокировку и восстановить нормальную работу сети.

6. **Сохранение выбора**:
   - Выбранные серверы сохраняются в файл `selected_servers.json` в той же директории, что позволяет сохранять настройки между запусками.

## Примечания
- **Права администратора**: Для работы `pydivert` необходимы права администратора. Если они отсутствуют, появится предупреждение.
- **Файл Servers.json**: Файл уже включён в репозиторий, но убедитесь, что он находится в той же директории, что и скрипт, иначе приложение завершится с ошибкой.
- **Диапазон портов**: Приложение блокирует TCP и UDP-трафик на портах 29450–29460, специфичных для серверов *Stalcraft*.

## Авторы
- Разработано **YungDaggerStab** и **WeedSellerBand**.
- Использованы библиотеки **PyQt6**, **pydivert** и **ping3**.


![Разрешено EXBO](https://i.imgur.com/abc123.png)

